<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MemeAstro (MA) Triple Airdrop | AstroChannel</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

<style>
  body { 
    background:#050512; 
    color:#e0f7ff;
    font-family: system-ui, -apple-system, sans-serif;
  }
  .neon { 
    box-shadow:0 0 20px rgba(0,229,255,.25);
    transition: all 0.3s ease;
  }
  .neon:hover {
    box-shadow:0 0 25px rgba(0,229,255,.4);
  }
  input:focus, button:focus {
    outline: 2px solid rgba(0,229,255,.5);
    outline-offset: 2px;
  }
</style>
</head>

<body class="min-h-screen px-4 py-10 max-w-3xl mx-auto">

<div class="mb-6 text-center">
  <a href="https://www.astrochannel.one/" class="inline-flex items-center gap-2 px-4 py-2 bg-cyan-400/10 border border-cyan-400/30 rounded-full text-cyan-400 hover:bg-cyan-400/20 transition-all">
    <i class="fa fa-arrow-left"></i> Back to Home
  </a>
</div>

<h1 class="text-4xl font-bold text-center mb-4 text-cyan-400">
üöÄ MemeAstro (MA) Triple Airdrop
</h1>
<p class="text-center text-gray-300 mb-8">
  Choose <b>1 of 3 ways</b> to join ¬∑ Total <b>35B MA (35%)</b> ¬∑ Lock 3 Months<br>
  <span class="text-cyan-300">
    Top 10k: 525,000 MA | 10k‚Äì50k: 218,750 MA | 50k‚Äì100k: 140,000 MA<br>
    100k‚Äì200k: 70,000 MA | 200k‚Äì1M: 8,750 MA
  </span>
</p>

<div class="bg-black/40 border border-cyan-400/30 rounded-xl p-5 mb-6 neon">
  <div class="flex justify-between items-center">
    <div id="walletStatus" class="text-sm text-gray-300">
      Wallet not connected
    </div>
    <button id="connectBtn"
      class="px-4 py-2 bg-cyan-400 text-black rounded-lg font-bold hover:bg-cyan-300 transition-colors">
      Connect Wallet
    </button>
  </div>
</div>

<div class="bg-black/40 border border-cyan-400/30 rounded-xl p-5 mb-6 hover:neon">
  <h2 class="text-xl font-bold mb-2 flex items-center gap-2">
    <i class="fa fa-mobile text-cyan-400"></i> Starlink Phone (IMEI)
  </h2>
  <p class="text-gray-400 mb-3">15-digit IMEI ¬∑ Bonus +10,000 MA</p>
  <input id="imeiInput" class="w-full p-3 bg-black rounded mb-2 border border-cyan-400/30 focus:border-cyan-400"
    placeholder="Enter 15-digit IMEI" maxlength="15" type="text" oninput="this.value=this.value.replace(/[^0-9]/g,'')">
  <button id="imeiBtn"
    class="w-full bg-cyan-400 text-black font-bold py-2 rounded hover:bg-cyan-300 transition-colors">
    Verify IMEI
  </button>
  <div id="imeiStatus" class="mt-2 text-sm"></div>
</div>

<div class="bg-black/40 border border-cyan-400/30 rounded-xl p-5 mb-6 hover:neon">
  <h2 class="text-xl font-bold mb-2 flex items-center gap-2">
    <i class="fa fa-twitter text-cyan-400"></i> X (Twitter)
  </h2>
  <button onclick="window.open('https://x.com/Astro___Channel','_blank')"
    class="w-full mb-2 bg-cyan-400 text-black font-bold py-2 rounded hover:bg-cyan-300 transition-colors">
    Follow @Astro___Channel
  </button>
  <button id="xBtn"
    class="w-full bg-purple-500 text-black font-bold py-2 rounded hover:bg-purple-400 transition-colors">
    I‚Äôve Followed ‚Äì Verify
  </button>
  <div id="xStatus" class="mt-2 text-sm"></div>
</div>

<div class="bg-black/40 border border-cyan-400/30 rounded-xl p-5 mb-6 hover:neon">
  <h2 class="text-xl font-bold mb-2 flex items-center gap-2">
    <i class="fa fa-exchange text-cyan-400"></i> Bridge Transfer
  </h2>
  <button onclick="window.open('https://www.astrochannel.one/bridge.html','_blank')"
    class="w-full mb-2 bg-cyan-400 text-black font-bold py-2 rounded hover:bg-cyan-300 transition-colors">
    Go to Bridge
  </button>
  <button id="bridgeBtn"
    class="w-full bg-purple-500 text-black font-bold py-2 rounded hover:bg-purple-400 transition-colors">
    Completed ‚Äì Verify
  </button>
  <div id="bridgeStatus" class="mt-2 text-sm"></div>
</div>

<div class="bg-black/60 border border-cyan-400/30 rounded-xl p-6 neon">
  <h2 class="text-xl font-bold mb-3 flex items-center gap-2">
    <i class="fa fa-trophy text-cyan-400"></i> Your Reward
  </h2>
  <div id="rewardInfo" class="mb-4 text-gray-300">
    Complete any verification to see reward
  </div>
  <button id="claimBtn" disabled
    class="w-full py-3 bg-gray-600 rounded font-bold cursor-not-allowed">
    Claim Airdrop (Gas Fee: User)
  </button>
  <div id="claimStatus" class="mt-3 text-sm"></div>
</div>

<footer class="mt-10 text-center text-gray-500 text-sm">
  <p>¬© 2026 AstroChannel ¬∑ MA = MemeAstro Token</p>
  <p class="mt-1">Hold MA 6 months ‚Üí 10,000:1 airdrop ASTRO mainnet token</p>
  <p class="mt-1">Crypto investment involves risk ¬∑ All rewards locked for 3 months</p>
</footer>

<script>
/* ------------------ CONFIG ------------------ */
const API_BASE = "https://your-backend.com/api";
const CONTRACT_ADDRESS = "0xYourContractAddress";
const CHAIN_ID = 1;

const CONTRACT_ABI = [
  "function claimAirdrop(uint256 rewardAmount, bytes calldata signature) external",
  "function claimed(address) view returns (bool)",
  "function unlockTime(address) view returns (uint256)"
];

/* ------------------ STATE ------------------ */
let provider, signer, walletAddress;
const appState = { imei:false, x:false, bridge:false, reward:0, claimed:false };

/* ------------------ WALLET ------------------ */
document.getElementById("connectBtn").onclick = async () => {
  try {
    if (!window.ethereum) throw new Error("Install MetaMask");
    provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);
    signer = provider.getSigner();
    walletAddress = await signer.getAddress();
    const status = document.getElementById("walletStatus");
    status.innerText = `Connected: ${walletAddress.slice(0,6)}...${walletAddress.slice(-4)}`;
    status.style.color = "#00e5ff";
  } catch (e) {
    alert(e.message);
  }
};

/* ------------------ HELPERS ------------------ */
async function sendVerify(endpoint, btn, statusDiv) {
  if (!walletAddress) return alert("Connect wallet first");
  btn.disabled = true; btn.innerText = "Verifying...";
  try {
    const body = { wallet: walletAddress };
    if(endpoint==="verify-imei") body.imei = document.getElementById("imeiInput").value.trim();
    const res = await fetch(`${API_BASE}/${endpoint}`, {
      method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify(body)
    });
    const data = await res.json();
    if(!data.success) throw new Error(data.message);
    appState[endpoint==="verify-imei"?"imei":endpoint==="verify-x"?"x":"bridge"]=true;
    statusDiv.innerText = `‚úÖ ${data.message}`;
    statusDiv.style.color="#00e5ff";
    updateReward();
  } catch(e) {
    statusDiv.innerText = `‚ùå ${e.message}`;
    statusDiv.style.color="#ff4444";
  } finally {
    btn.disabled = false;
    if(endpoint==="verify-imei") btn.innerText="Verify IMEI";
    if(endpoint==="verify-x") btn.innerText="I‚Äôve Followed ‚Äì Verify";
    if(endpoint==="verify-bridge") btn.innerText="Completed ‚Äì Verify";
  }
}

/* ------------------ BUTTON EVENTS ------------------ */
document.getElementById("imeiBtn").onclick = () => sendVerify("verify-imei", document.getElementById("imeiBtn"), document.getElementById("imeiStatus"));
document.getElementById("xBtn").onclick = () => sendVerify("verify-x", document.getElementById("xBtn"), document.getElementById("xStatus"));
document.getElementById("bridgeBtn").onclick = () => sendVerify("verify-bridge", document.getElementById("bridgeBtn"), document.getElementById("bridgeStatus"));

/* ------------------ REWARD ------------------ */
async function updateReward(){
  if(!(appState.imei||appState.x||appState.bridge)) return;
  try{
    const res = await fetch(`${API_BASE}/reward?wallet=${walletAddress}`);
    const data = await res.json();
    if(!data.success) throw new Error(data.message);
    appState.reward = data.totalReward;
    document.getElementById("rewardInfo").innerHTML =
      `üéÅ Your Reward: <b class="text-cyan-400">${appState.reward.toLocaleString()} MA</b>`;
    const btn = document.getElementById("claimBtn");
    btn.disabled=false;
    btn.className="w-full py-3 bg-cyan-400 text-black font-bold rounded hover:bg-cyan-300 transition-colors";
  }catch(e){
    document.getElementById("rewardInfo").innerText = `‚ùå ${e.message}`;
  }
}

/* ------------------ CLAIM ------------------ */
document.getElementById("claimBtn").onclick = async ()=>{
  if(!walletAddress||appState.claimed) return;
  const btn=document.getElementById("claimBtn"),status=document.getElementById("claimStatus");
  try{
    btn.disabled=true; btn.innerText="Signing..."; status.innerText="Requesting signature...";
    const res = await fetch(`${API_BASE}/claim`, {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({ wallet:walletAddress, reward:appState.reward })
    });
    const data = await res.json();
    if(!data.success) throw new Error(data.message);

    status.innerText="Claiming on-chain...";
    const contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);
    const tx = await contract.claimAirdrop(ethers.utils.parseUnits(appState.reward.toString(),18), data.signature);
    await tx.wait();

    appState.claimed=true;
    status.innerText=`‚úÖ Claimed! ${appState.reward.toLocaleString()} MA locked for 3 months`;
    btn.innerText="Claimed";
    btn.className="w-full py-3 bg-gray-600 rounded font-bold cursor-not-allowed";
  }catch(e){
    status.innerText=`‚ùå Failed: ${e.message}`;
    btn.disabled=false;
    btn.innerText="Claim Airdrop (Gas Fee: User)";
  }
};
</script>
</body>
</html>
