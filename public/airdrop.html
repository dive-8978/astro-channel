<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MemeAstro (MA) Triple Airdrop | AstroChannel</title>

  <!-- ‰ΩøÁî®Êú¨Âú∞ Tailwind CSS ÊûÑÂª∫ -->
  <link rel="stylesheet" href="dist/output.css">

  <style>
    body { 
      background:#050512; 
      color:#e0f7ff;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    .neon { 
      box-shadow:0 0 20px rgba(0,229,255,.25);
      transition: all 0.3s ease;
    }
    .neon:hover { box-shadow:0 0 25px rgba(0,229,255,.4); }
    input:focus, button:focus { outline: 2px solid rgba(0,229,255,.5); outline-offset: 2px; }
    .task-card, .reward-card { background: rgba(0,0,0,0.4); border: 1px solid rgba(0,229,255,0.3); border-radius: 16px; padding: 24px; margin-bottom: 20px; }
    .task-card:hover, .reward-card:hover { border-color: rgba(0,229,255,0.5); }
    .task-title, .reward-title { font-size: 18px; font-weight: 700; color: #00e5ff; margin-bottom: 8px; }
    .task-desc, .reward-desc { color: #a0c8d8; margin-bottom: 16px; line-height: 1.5; }
    .btn { display: inline-flex; align-items: center; justify-content: center; padding: 12px 24px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; text-align: center; width: 100%; }
    .btn-primary { background: #00e5ff; color: #000; }
    .btn-primary:hover:not(:disabled) { background: #33ebff; }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .claim-section { margin-top: 30px; text-align: center; }
    #claimAirdrop { max-width: 320px; padding: 16px; font-size: 18px; }
    .status { margin-top: 12px; color: #52c41a; font-weight: 500; }
    .gas-note { margin-top: 20px; text-align: center; color: #88aabb; font-size: 14px; }
    .stats { text-align: center; margin-bottom: 24px; color: #a0c8d8; }
    .x-follow-btn { background: #1da1f2; color: white; margin-bottom: 12px; }
    .x-follow-btn:hover { background: #1a91da; }
    .x-icon { width: 18px; height: 18px; margin-right: 8px; fill: currentColor; }
  </style>
</head>

<body class="min-h-screen py-10">

  <div class="mx-auto w-[670px] px-4">
    <div class="mb-6 text-center">
      <a href="https://www.astrochannel.one/" class="inline-flex items-center gap-2 px-4 py-2 bg-cyan-400/10 border border-cyan-400/30 rounded-full text-cyan-400 hover:bg-cyan-400/20 transition-all">
        ‚Üê Back to Home
      </a>
    </div>

    <h1 class="text-4xl font-bold text-center mb-4 text-cyan-400">üöÄ MemeAstro (MA) Triple Airdrop</h1>
    <p class="text-center text-gray-300 mb-4">Choose <b>1 of 3 ways</b> to join ¬∑ Total <b>35B MA (35%)</b> ¬∑ Lock 3 Months</p>

    <div class="reward-card">
      <div class="reward-title">üíé Long-Term Double Reward (ASTRO Airdrop)</div>
      <div class="reward-desc">
        ‚Ä¢ Hold MA for <b>6 months</b> ‚Üí Get <b>ASTRO (Mainnet Token)</b> airdrop<br>
        ‚Ä¢ Ratio: <b>10,000 MA = 1 ASTRO</b><br>
        ‚Ä¢ Auto-snapshot & auto-distribute to your wallet (no manual action needed)<br>
        ‚Ä¢ ASTRO powers AstroChannel cross-chain bridge, AI wallet & mainnet ecosystem
      </div>
    </div>

    <div class="stats">Current Participants: <span id="participants" class="text-cyan-400 font-semibold">1,234</span></div>

    <!-- Wallet connection -->
    <div class="bg-black/40 border border-cyan-400/30 rounded-xl p-5 mb-6 neon">
      <div class="flex justify-between items-center">
        <div id="walletStatus" class="text-sm text-gray-300">Wallet not connected</div>
        <button id="connectBtn" class="px-4 py-2 bg-cyan-400 text-black rounded-lg font-bold hover:bg-cyan-300 transition-colors">Connect Wallet</button>
      </div>
    </div>

    <!-- Task Cards -->
    <div class="task-card">
      <div class="task-title">1. Follow X Account</div>
      <div class="task-desc">Click to open X & follow @Astro___Channel</div>
      <a href="https://x.com/Astro___Channel" target="_blank" class="btn x-follow-btn">Follow on X</a>
      <button class="btn btn-primary verify-btn" data-task="x">I've Followed</button>
    </div>

    <div class="task-card">
      <div class="task-title">2. Starlink IMEI Verification</div>
      <div class="task-desc">Enter 15-digit IMEI (one-time only)</div>
      <input type="text" id="imeiInput" placeholder="Enter 15-digit IMEI" class="w-full px-4 py-3 bg-black/50 border border-cyan-400/30 rounded-lg text-white mb-4" maxlength="15">
      <button class="btn btn-primary verify-btn" data-task="imei">Verify IMEI</button>
    </div>

    <div class="task-card">
      <div class="task-title">3. Complete Cross-Chain Transfer</div>
      <div class="task-desc">Transfer via bridge & verify record</div>
      <a href="https://www.astrochannel.one/bridge.html" target="_blank" class="inline-block text-cyan-400 hover:text-cyan-300 mb-4 w-full text-center">Go to Bridge ‚Üí</a>
      <button class="btn btn-primary verify-btn" data-task="bridge">Verify Transfer</button>
    </div>

    <!-- Claim -->
    <div class="claim-section">
      <button class="btn btn-primary" id="claimAirdrop" disabled>Claim MA Airdrop</button>
      <div id="claimStatus" class="status"></div>
    </div>

    <div class="gas-note">Gas fees on BSC are paid by the user</div>
  </div>

  <script type="module">
    import { ethers } from './ethers.js'; // Êú¨Âú∞ÊûÑÂª∫ÁâàÊú¨

    let connectedWallet = null;
    let verifiedTasks = { x: false, imei: false, bridge: false };

    document.getElementById('connectBtn').addEventListener('click', async () => {
      if (!window.ethereum) { alert('Please install MetaMask'); return; }
      try {
        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        connectedWallet = accounts[0];
        document.getElementById('walletStatus').textContent = `Connected: ${connectedWallet.slice(0,6)}...${connectedWallet.slice(-4)}`;
        document.getElementById('connectBtn').textContent = 'Connected';
        document.getElementById('connectBtn').disabled = true;
        checkClaimEnable();
      } catch (err) { console.error('Connect failed', err); }
    });

    document.querySelectorAll('.verify-btn').forEach(btn => {
      btn.addEventListener('click', async () => {
        if (!connectedWallet) { alert('Connect MetaMask first'); return; }
        const task = btn.dataset.task;
        btn.textContent = 'Verifying...'; btn.disabled = true;

        if (task === 'imei') {
          const imei = document.getElementById('imeiInput').value.trim();
          if (imei.length !== 15 || !/^\d+$/.test(imei)) {
            alert('IMEI must be 15 digits'); btn.textContent = 'Verify IMEI'; btn.disabled = false; return;
          }
        }

        await new Promise(r => setTimeout(r, 1500)); // Ê®°ÊãüÂêéÁ´ØÈ™åËØÅ
        verifiedTasks[task] = true;
        btn.textContent = '‚úÖ Verified';
        btn.style.background = '#52c41a';
        checkClaimEnable();
      });
    });

    function checkClaimEnable() {
      const ok = Object.values(verifiedTasks).some(v => v);
      document.getElementById('claimAirdrop').disabled = !ok || !connectedWallet;
    }

    document.getElementById('claimAirdrop').addEventListener('click', async () => {
      const btn = document.getElementById('claimAirdrop');
      const status = document.getElementById('claimStatus');
      btn.textContent = 'Claiming...'; btn.disabled = true;
      await new Promise(r => setTimeout(r, 2000));
      status.textContent = '‚úÖ Claimed! MA locked for 3 months, auto-unlock at expiry';
      btn.textContent = 'Claimed';
    });
  </script>
</body>
</html>
